/*
 Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",init:function(d){function k(a){d.getStylesSet(function(g){if(!j.length){for(var b,f,e=0,c=g.length;e<c;e++)b=g[e],d.blockless&&b.element in CKEDITOR.dtd.$block||(f=b.name,b=h[f]=new CKEDITOR.style(b),b._name=f,b._.enterMode=
l.enterMode,b._.weight=e+1E3*(b.type==CKEDITOR.STYLE_OBJECT?1:b.type==CKEDITOR.STYLE_BLOCK?2:3),j.push(b));j.sort(function(a,b){return a._.weight-b._.weight})}a&&a()})}var l=d.config,i=d.lang.stylescombo,h={},j=[],c;d.ui.addRichCombo("Styles",{label:i.label,title:i.panelTitle,toolbar:"styles,10",panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!0,attributes:{"aria-label":i.panelTitle}},init:function(){c=this;k(function(){var a,g,b,f,e,d;e=0;for(d=j.length;e<d;e++)a=j[e],
g=a._name,f=a.type,f!=b&&(c.startGroup(i["panelTitle"+f]),b=f),c.add(g,a.type==CKEDITOR.STYLE_OBJECT?g:a.buildPreview(),g);c.commit()})},onClick:function(a){d.focus();d.fire("saveSnapshot");var a=h[a],g=d.elementPath();d[a.checkActive(g)?"removeStyle":"applyStyle"](a);d.fire("saveSnapshot")},onRender:function(){d.on("selectionChange",function(a){for(var d=this.getValue(),a=a.data.path.elements,b=0,f=a.length,e;b<f;b++){e=a[b];for(var c in h)if(h[c].checkElementRemovable(e,!0)){c!=d&&this.setValue(c);
return}}this.setValue("")},this)},onOpen:function(){var a=d.getSelection().getSelectedElement(),a=d.elementPath(a),c=[0,0,0,0];this.showAll();this.unmarkAll();for(var b in h){var f=h[b],e=f.type;e==CKEDITOR.STYLE_BLOCK&&!a.isContextFor(f.element)?this.hideItem(b):(f.checkActive(a)?this.mark(b):e==CKEDITOR.STYLE_OBJECT&&!f.checkApplicable(a)&&(this.hideItem(b),c[e]--),c[e]++)}c[CKEDITOR.STYLE_BLOCK]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_BLOCK]);c[CKEDITOR.STYLE_INLINE]||this.hideGroup(i["panelTitle"+
CKEDITOR.STYLE_INLINE]);c[CKEDITOR.STYLE_OBJECT]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_OBJECT])},reset:function(){c&&(delete c._.panel,delete c._.list,c._.committed=0,c._.items={},c._.state=CKEDITOR.TRISTATE_OFF);h={};j=[];k()}});d.on("instanceReady",function(){k()})}})})();